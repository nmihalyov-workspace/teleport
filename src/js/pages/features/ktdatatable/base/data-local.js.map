{"version":3,"names":[],"mappings":"","sources":["features/ktdatatable/base/data-local.js"],"sourcesContent":["'use strict';\r\n// Class definition\r\n\r\nvar KTDatatableDataLocal = function() {\r\n    // Private functions\r\n    \r\n    var userTable = function() {\r\n        var userTableJSONArray = JSON.parse('[' +\r\n            '{\"State\": 1, \"Place\": \"Администратор\", \"Fio\": \"Иван Иванов Иваныч\", \"Email\": \"amail@mail.ru\", \"Phone\": \"8 (950) 123-45-67\", \"Date\": \"23.02.2020\", \"Status\": 1, \"Actions\": null},\\n' +\r\n            '{\"State\": 1, \"Place\": \"Оператор\", \"Fio\": \"Ермаков Август Артемович\", \"Email\": \"bmail@mail.ru\", \"Phone\": \"8 (950) 123-45-68\", \"Date\": \"16.03.2020\", \"Status\": 1,  \"Actions\": null},\\n' +\r\n            '{\"State\": 1, \"Place\": \"Оператор\", \"Fio\": \"Лебедев Кассиан Львович\", \"Email\": \"cmail@mail.ru\", \"Phone\": \"8 (950) 123-45-69\", \"Date\": \"01.04.2020\", \"Status\": 2,  \"Actions\": null},\\n' +\r\n            '{\"State\": 2, \"Place\": \"Оператор\", \"Fio\": \"Тихонов Давид Ярославович\", \"Email\": \"dmail@mail.ru\", \"Phone\": \"8 (950) 123-45-70\", \"Date\": \"27.05.2020\", \"Status\": 2, \"Actions\": null},\\n' +\r\n            '{\"State\": 1, \"Place\": \"Оператор\", \"Fio\": \"Марков Гордий Григорьевич\", \"Email\": \"email@mail.ru\", \"Phone\": \"8 (950) 123-45-71\", \"Date\": \"18.06.2020\", \"Status\": 2, \"Actions\": null},\\n' +\r\n            '{\"State\": 1, \"Place\": \"Оператор\", \"Fio\": \"Крылов Лев Ярославович\", \"Email\": \"fmail@mail.ru\", \"Phone\": \"8 (950) 123-45-72\", \"Date\": \"12.07.2020\", \"Status\": 1, \"Actions\": null},\\n' +\r\n            '{\"State\": 2, \"Place\": \"Оператор\", \"Fio\": \"Александров Емельян Авдеевич\", \"Email\": \"hmail@mail.ru\", \"Phone\": \"8 (950) 123-45-73\", \"Date\": \"21.08.2020\", \"Status\": 2, \"Actions\": null},\\n' +\r\n            '{\"State\": 1, \"Place\": \"Оператор\", \"Fio\": \"Филатов Альфред Авдеевич\", \"Email\": \"imail@mail.ru\", \"Phone\": \"8 (950) 123-45-74\", \"Date\": \"02.09.2020\", \"Status\": 1, \"Actions\": null},\\n' +\r\n            '{\"State\": 1, \"Place\": \"Оператор\", \"Fio\": \"Наумов Захар Антонович\", \"Email\": \"jmail@mail.ru\", \"Phone\": \"8 (950) 123-45-75\", \"Date\": \"18.10.2020\", \"Status\": 1, \"Actions\": null},\\n' +\r\n            '{\"State\": 1, \"Place\": \"Оператор\", \"Fio\": \"Кудряшов Алан Авксентьевич\", \"Email\": \"kmail@mail.ru\", \"Phone\": \"8 (950) 123-45-76\", \"Date\": \"01.11.2020\", \"Status\": 2, \"Actions\": null},\\n' +\r\n            '{\"State\": 2, \"Place\": \"Оператор\", \"Fio\": \"Шилов Адам Викторович\", \"Email\": \"lmail@mail.ru\", \"Phone\": \"8 (950) 123-45-77\", \"Date\": \"06.12.2020\", \"Status\": 2, \"Actions\": null}]');\r\n\r\n        var datatable = $('#userTable').KTDatatable({\r\n            data: {\r\n                type: 'local',\r\n                source: userTableJSONArray,\r\n                pageSize: 10,\r\n            },\r\n            layout: {\r\n                scroll: false,\r\n                footer: false\r\n            },\r\n            sortable: true,\r\n            pagination: true,\r\n            search: {\r\n                input: $('#kt_userTable_search_query'),\r\n                key: 'generalSearch'\r\n            },\r\n\r\n            columns: [\r\n                {\r\n                    field: 'State',\r\n                    title: '',\r\n                    width: 16,\r\n                    template: function (row) {\r\n                        var state = {\r\n                            1: {\r\n                                'title': 'Активный',\r\n                                'class': ' label-success'\r\n                            },\r\n                            2: {\r\n                                'title': 'Приостановленный',\r\n                                'class': ' label-danger'\r\n                            }\r\n                        };\r\n                        return '<span class=\"label label-dot label-xl ' + state[row.State].class + '\" title=\"' + state[row.State].title + '\"></span>';\r\n                    },\r\n                },\r\n                {\r\n                    field: 'Fio',\r\n                    title: 'ФИО',\r\n                },\r\n                {\r\n                    field: 'Status',\r\n                    title: 'Статус',\r\n                    width: 136,\r\n                    template: function (row) {\r\n                        var status = {\r\n                            1: {\r\n                                'title': 'Администратор',\r\n                                'class': ' label-light-success'\r\n                            },\r\n                            2: {\r\n                                'title': 'Оператор',\r\n                                'class': ' label-light-danger'\r\n                            }\r\n                        };\r\n                        return '<span class=\"label font-weight-bold ' + status[row.Status].class + ' label-inline text-nowrap\">' + status[row.Status].title + '</span>';\r\n                    },\r\n                },\r\n                {\r\n                    field: 'Place',\r\n                    title: 'Должность'\r\n                },\r\n                {\r\n                    field: 'Email',\r\n                    title: 'Email',\r\n                    width: 120,\r\n                },\r\n                {\r\n                    field: 'Phone',\r\n                    title: 'Телефон',\r\n                    width: 120,\r\n                },\r\n                {\r\n                    field: 'Date',\r\n                    title: 'Дата добавления',\r\n                    type: 'date',\r\n                    format: 'DD.MM.YYYY',\r\n                },\r\n                {\r\n                    field: 'Actions',\r\n                    title: '',\r\n                    sortable: false,\r\n                    width: 32,\r\n                    overflow: 'visible',\r\n                    autoHide: false,\r\n                    template: function () {\r\n                        return '\\\r\n                            <div class=\"dropdown dropdown-inline\">\\\r\n                                <a href=\"javascript:;\" class=\"btn btn-sm btn-clean btn-icon\" data-toggle=\"dropdown\">\\\r\n                                    <span class=\"svg-icon svg-icon-md\">\\\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\">\\\r\n                                            <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\\r\n                                                <rect x=\"0\" y=\"0\" width=\"24\" height=\"24\"/>\\\r\n                                                <path d=\"M5,8.6862915 L5,5 L8.6862915,5 L11.5857864,2.10050506 L14.4852814,5 L19,5 L19,9.51471863 L21.4852814,12 L19,14.4852814 L19,19 L14.4852814,19 L11.5857864,21.8994949 L8.6862915,19 L5,19 L5,15.3137085 L1.6862915,12 L5,8.6862915 Z M12,15 C13.6568542,15 15,13.6568542 15,12 C15,10.3431458 13.6568542,9 12,9 C10.3431458,9 9,10.3431458 9,12 C9,13.6568542 10.3431458,15 12,15 Z\" fill=\"#000000\"/>\\\r\n                                            </g>\\\r\n                                        </svg>\\\r\n                                    </span>\\\r\n                                </a>\\\r\n                                <div class=\"dropdown-menu dropdown-menu-sm dropdown-menu-right\">\\\r\n                                    <ul class=\"navi flex-column navi-hover py-2\">\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#addUser\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-edit text-primary\"></i></span>\\\r\n                                                <span class=\"navi-text\">Редактировать</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-exchange text-success\"></i></span>\\\r\n                                                <span class=\"navi-text\">Приостановить/возобновить</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#resetPass\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-lock text-warning\"></i></span>\\\r\n                                                <span class=\"navi-text\">Сбросить пароль</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#removeUser\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-trash-o text-danger\"></i></span>\\\r\n                                                <span class=\"navi-text\">Удалить</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                    </ul>\\\r\n                                </div>\\\r\n                            </div>\\\r\n                        ';\r\n                    },\r\n                }\r\n            ],\r\n        });\r\n\r\n        $('#kt_userTable_search_status').on('change', function() {\r\n            datatable.search($(this).val().toLowerCase(), 'Status');\r\n        });\r\n        $('#kt_userTable_search_status').selectpicker();\r\n    \r\n        $('#kt_userTable_search_state').on('change', function() {\r\n            datatable.search($(this).val().toLowerCase(), 'State');\r\n        });\r\n        $('#kt_userTable_search_state').selectpicker();\r\n    \r\n        $('#kt_userTable_reset').on('click', function (){\r\n            $('#kt_userTable_search_status').selectpicker('val', null);\r\n            $('#kt_userTable_search_state').selectpicker('val', null);\r\n            $('#kt_userTable_search_query').val('').change();\r\n            datatable.search('', ['State', 'Status', 'generalSearch']);\r\n        });\r\n    };\r\n    \r\n    var subTable = function() {\r\n        var userTableJSONArray = JSON.parse('[' +\r\n            '{\"State\": 1, \"Name\": \"ООО «Альфа»\", \"Inn\": \"12345678912\", \"Email\": \"termail@mail.ru\", \"Phone\": \"8 (950) 123-45-67\", \"Actions\": null},\\n' +\r\n            '{\"State\": 2, \"Name\": \"ООО «Бета»\", \"Inn\": \"25964125632\", \"Email\": \"griil@mail.ru\", \"Phone\": \"8 (950) 987-54-21\", \"Actions\": null},\\n' +\r\n            '{\"State\": 1, \"Name\": \"ОАО «Рога и Копыта»\", \"Inn\": \"32165498732\", \"Email\": \"gasmail@mail.ru\", \"Phone\": \"8 (950) 147-85-63\", \"Actions\": null}]');\r\n        \r\n        var datatable = $('#subTable').KTDatatable({\r\n            data: {\r\n                type: 'local',\r\n                source: userTableJSONArray,\r\n                pageSize: 10,\r\n            },\r\n            layout: {\r\n                scroll: false,\r\n                footer: false\r\n            },\r\n            sortable: true,\r\n            pagination: true,\r\n            search: {\r\n                input: $('#kt_subTable_search_query'),\r\n                key: 'generalSearch'\r\n            },\r\n            columns: [\r\n                {\r\n                    field: 'State',\r\n                    title: '',\r\n                    width: 16,\r\n                    template: function (row) {\r\n                        var state = {\r\n                            1: {\r\n                                'title': 'Активный',\r\n                                'class': ' label-success'\r\n                            },\r\n                            2: {\r\n                                'title': 'Приостановленный',\r\n                                'class': ' label-danger'\r\n                            }\r\n                        };\r\n                        return '<span class=\"label label-dot label-xl ' + state[row.State].class + '\" title=\"' + state[row.State].title + '\"></span>';\r\n                    },\r\n                },\r\n                {\r\n                    field: 'Name',\r\n                    title: 'Наименование',\r\n                    width: 160,\r\n                },\r\n                {\r\n                    field: 'Inn',\r\n                    title: 'ИНН',\r\n                    width: 160,\r\n                },\r\n                {\r\n                    field: 'Email',\r\n                    title: 'Email',\r\n                    width: 120,\r\n                },\r\n                {\r\n                    field: 'Phone',\r\n                    title: 'Телефон',\r\n                    width: 120,\r\n                },\r\n                {\r\n                    field: 'Actions',\r\n                    title: '',\r\n                    sortable: false,\r\n                    width: 32,\r\n                    overflow: 'visible',\r\n                    autoHide: false,\r\n                    template: function () {\r\n                        return '\\\r\n                            <div class=\"dropdown dropdown-inline\">\\\r\n                                <a href=\"javascript:;\" class=\"btn btn-sm btn-clean btn-icon\" data-toggle=\"dropdown\">\\\r\n                                    <span class=\"svg-icon svg-icon-md\">\\\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\">\\\r\n                                            <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\\r\n                                                <rect x=\"0\" y=\"0\" width=\"24\" height=\"24\"/>\\\r\n                                                <path d=\"M5,8.6862915 L5,5 L8.6862915,5 L11.5857864,2.10050506 L14.4852814,5 L19,5 L19,9.51471863 L21.4852814,12 L19,14.4852814 L19,19 L14.4852814,19 L11.5857864,21.8994949 L8.6862915,19 L5,19 L5,15.3137085 L1.6862915,12 L5,8.6862915 Z M12,15 C13.6568542,15 15,13.6568542 15,12 C15,10.3431458 13.6568542,9 12,9 C10.3431458,9 9,10.3431458 9,12 C9,13.6568542 10.3431458,15 12,15 Z\" fill=\"#000000\"/>\\\r\n                                            </g>\\\r\n                                        </svg>\\\r\n                                    </span>\\\r\n                                </a>\\\r\n                                <div class=\"dropdown-menu dropdown-menu-sm dropdown-menu-right\">\\\r\n                                    <ul class=\"navi flex-column navi-hover py-2\">\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#addSub\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-edit text-primary\"></i></span>\\\r\n                                                <span class=\"navi-text\">Редактировать</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-exchange text-success\"></i></span>\\\r\n                                                <span class=\"navi-text\">Приостановить/возобновить</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#resetPass\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-lock text-warning\"></i></span>\\\r\n                                                <span class=\"navi-text\">Сбросить пароль</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#removeUser\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-trash-o text-danger\"></i></span>\\\r\n                                                <span class=\"navi-text\">Удалить</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                    </ul>\\\r\n                                </div>\\\r\n                            </div>\\\r\n                        ';\r\n                    }\r\n                    \r\n                    /*template: function () {\r\n                        return '\\\r\n                            <div class=\"dropdown dropdown-inline\">\\\r\n                                <a href=\"javascript:;\" class=\"btn btn-sm btn-clean btn-icon\" data-toggle=\"dropdown\">\\\r\n                                    <span class=\"svg-icon svg-icon-md\">\\\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\">\\\r\n                                            <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\\r\n                                                <rect x=\"0\" y=\"0\" width=\"24\" height=\"24\"/>\\\r\n                                                <path d=\"M5,8.6862915 L5,5 L8.6862915,5 L11.5857864,2.10050506 L14.4852814,5 L19,5 L19,9.51471863 L21.4852814,12 L19,14.4852814 L19,19 L14.4852814,19 L11.5857864,21.8994949 L8.6862915,19 L5,19 L5,15.3137085 L1.6862915,12 L5,8.6862915 Z M12,15 C13.6568542,15 15,13.6568542 15,12 C15,10.3431458 13.6568542,9 12,9 C10.3431458,9 9,10.3431458 9,12 C9,13.6568542 10.3431458,15 12,15 Z\" fill=\"#000000\"/>\\\r\n                                            </g>\\\r\n                                        </svg>\\\r\n                                    </span>\\\r\n                                </a>\\\r\n                                <div class=\"dropdown-menu dropdown-menu-sm dropdown-menu-right\">\\\r\n                                    <ul class=\"navi flex-column navi-hover py-2\">\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#addSub\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-edit text-primary\"></i></span>\\\r\n                                                <span class=\"navi-text\">Редактировать</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#resetPass\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-lock text-warning\"></i></span>\\\r\n                                                <span class=\"navi-text\">Сбросить пароль</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-unlink text-danger\"></i></span>\\\r\n                                                <span class=\"navi-text\">Отвязать</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                    </ul>\\\r\n                                </div>\\\r\n                            </div>\\\r\n                        ';\r\n                    },*/\r\n                }\r\n            ],\r\n        });\r\n    \r\n        $('#kt_subTable_search_state').on('change', function() {\r\n            datatable.search($(this).val().toLowerCase(), 'State');\r\n        });\r\n        $('#kt_subTable_search_state').selectpicker();\r\n    \r\n        $('#kt_subTable_reset').on('click', function (){\r\n            $('#kt_subTable_search_state').selectpicker('val', null);\r\n            $('#kt_subTable_search_query').val('').change();\r\n            datatable.search('', ['State', 'generalSearch']);\r\n        });\r\n\r\n        $('#tab-panel').on('hide.bs.tab', function () {\r\n            setTimeout(function () {\r\n                if (datatable) datatable.redraw();\r\n            }, 250);\r\n        });\r\n    };\r\n    \r\n    var clientsTable = function() {\r\n        var userClientsJSONArray = JSON.parse('[' +\r\n            '{\"RecordID\": 1, \"Org\": \"ООО ЗевсМейстер\", \"regDate\": \"31.01.2020\", \"regTime\": \"12:15\", \"Inn\": \"123456789012\", \"orgType\": 1, \"Region\": \"Республика Татарстан\", \"Time\": \"16:03\", \"Operator\": \"Белозёрова Венера Викторовна\", \"Comment\": \"Сложно сказать, почему акционеры крупнейших компаний неоднозначны и будут разоблачены.\", \"Actions\": null},\\n' +\r\n            '{\"RecordID\": 2, \"Org\": \"ОАО АльбаСтрим\", \"regDate\": \"13.02.2020\", \"regTime\": \"14:15\", \"Inn\": \"123456789013\", \"orgType\": 2, \"Region\": \"Московская область\", \"Time\": \"12:03\", \"Operator\": \"Андреева Кристина Ивановна\", \"Comment\": \"Кстати, некоторые особенности внутренней политики лишь добавляют фракционных разногласий и разоблачены!\", \"Actions\": null},\\n' +\r\n            '{\"RecordID\": 3, \"Org\": \"АО ЭйрАльянс\", \"regDate\": \"24.03.2021\", \"regTime\": \"15:15\", \"Inn\": \"123456789014\", \"orgType\": 1, \"Region\": \"Иркутской области\", \"Time\": \"11:03\", \"Operator\": \"Пономарёва Руслана Никитевна\", \"Comment\": \"Современные технологии достигли такого уровня, что базовый вектор развития позволяет выполнить важные задания по разработке дальнейших направлений развития.\", \"Actions\": null},\\n' +\r\n            '{\"RecordID\": 4, \"Org\": \"ИП ВысотаЭксперт\", \"regDate\": \"05.01.2020\", \"regTime\": \"16:15\", \"Inn\": \"123456789015\", \"orgType\": 2, \"Region\": \"Пермский край\", \"Time\": \"16:03\", \"Operator\": \"Андреева Кристина Ивановна\", \"Comment\": \"В рамках спецификации современных стандартов, сделанные на базе интернет-аналитики выводы объективно рассмотрены соответствующими инстанциями!\", \"Actions\": null},\\n' +\r\n            '{\"RecordID\": 5, \"Org\": \"ОАО ЭкоМедиа\", \"regDate\": \"12.11.2021\", \"regTime\": \"17:15\", \"Inn\": \"123456789016\", \"orgType\": 1, \"Region\": \"Красноярскому край\", \"Time\": \"14:03\", \"Operator\": \"Белозёрова Венера Викторовна\", \"Comment\": \"Мы вынуждены отталкиваться от того, что высокое качество позиционных исследований способствует подготовке и реализации экономической целесообразности принимаемых решений.\", \"Actions\": null},\\n' +\r\n            '{\"RecordID\": 6, \"Org\": \"УУУ Скатактион\", \"regDate\": \"16.07.2020\", \"regTime\": \"18:15\", \"Inn\": \"123456789017\", \"orgType\": 1, \"Region\": \"Камчатский край\", \"Time\": \"10:03\", \"Operator\": \"Пономарёва Руслана Никитевна\", \"Comment\": \"Есть над чем задуматься: акционеры крупнейших компаний неоднозначны и будут превращены в посмешище, хотя само их существование приносит несомненную пользу обществу.\", \"Actions\": null},\\n' +\r\n            '{\"RecordID\": 7, \"Org\": \"ВПО СилаСпутник\", \"regDate\": \"02.05.2021\", \"regTime\": \"19:15\", \"Inn\": \"123456789018\", \"orgType\": 2, \"Region\": \"Забайкальский край\", \"Time\": \"12:03\", \"Operator\": \"Кабанова Капитолина Агафоновна\", \"Comment\": \"Мы вынуждены отталкиваться от того, что синтетическое тестирование предопределяет высокую востребованность инновационных методов управления процессами.\", \"Actions\": null},\\n' +\r\n            '{\"RecordID\": 8, \"Org\": \"ИП СоколЭлемент\", \"regDate\": \"15.01.2020\", \"regTime\": \"20:15\", \"Inn\": \"123456789019\", \"orgType\": 2, \"Region\": \"Республика Крым\", \"Time\": \"22:03\", \"Operator\": \"Пономарёва Руслана Никитевна\", \"Comment\": \"Значимость этих проблем настолько очевидна, что консультация с широким активом является качественно новой ступенью экономической целесообразности принимаемых решений!\", \"Actions\": null},\\n' +\r\n            '{\"RecordID\": 9, \"Org\": \"ООО ЕвроБагира\", \"regDate\": \"08.08.2020\", \"regTime\": \"21:15\", \"Inn\": \"123456789020\", \"orgType\": 1, \"Region\": \"Тверская область\", \"Time\": \"08:03\", \"Operator\": \"Белозёрова Венера Викторовна\", \"Comment\": \"Приятно, граждане, наблюдать, как элементы политического процесса заблокированы в рамках своих собственных рациональных ограничений!\", \"Actions\": null},\\n' +\r\n            '{\"RecordID\": 10, \"Org\": \"АО Армадамодерн\", \"regDate\": \"01.05.2021\", \"regTime\": \"22:15\", \"Inn\": \"123456789021\", \"orgType\": 1, \"Region\": \"Еврейская автономная область\", \"Time\": \"12:03\", \"Operator\": \"Белозёрова Венера Викторовна\", \"Comment\": \"Но тщательные исследования конкурентов описаны максимально подробно.\", \"Actions\": null},\\n' +\r\n            '{\"RecordID\": 11, \"Org\": \"ИО Триадавиктори\", \"regDate\": \"29.02.2021\", \"regTime\": \"23:15\", \"Inn\": \"123456789022\", \"orgType\": 2, \"Region\": \"Тульская область\", \"Time\": \"11:03\", \"Operator\": \"Кабанова Капитолина Агафоновна\", \"Comment\": \"Безусловно, укрепление и развитие внутренней структуры является качественно новой ступенью распределения внутренних резервов и ресурсов.\", \"Actions\": null}]');\r\n        \r\n        var datatable = $('#kt_clientsTable').KTDatatable({\r\n            data: {\r\n                type: 'local',\r\n                source: userClientsJSONArray,\r\n                pageSize: 10,\r\n            },\r\n            layout: {\r\n                scroll: false,\r\n                footer: false\r\n            },\r\n            sortable: true,\r\n            pagination: true,\r\n            search: {\r\n                input: $('#kt_clientsTable_search_query'),\r\n                key: 'generalSearch'\r\n            },\r\n            \r\n            columns: [\r\n                {\r\n                    field: 'RecordID',\r\n                    width: 20\r\n                },\r\n                {\r\n                    field: 'regDate',\r\n                    title: 'Дата добавления',\r\n                    template: function(row) {\r\n                        return '<span>' + row.regDate + '</span><div>' + row.regTime + '</div>';\r\n                    },\r\n                },\r\n                {\r\n                    field: 'Org',\r\n                    title: 'Организация',\r\n                    template: function(row) {\r\n                        return '<span class=\"d-block font-weight-bolder\">' + row.Org + '</span><span class=\"font-size-sm\">ИНН: ' + row.Inn + '</span>';\r\n                    },\r\n                },\r\n                /*{\r\n                    field: 'orgType',\r\n                    title: 'Тип организации',\r\n                    template: function (row) {\r\n                        var type = {\r\n                            1: {\r\n                                'title': 'Юридическое лицо',\r\n                                'class': ' label-success'\r\n                            },\r\n                            2: {\r\n                                'title': 'Индивидуальный предприниматель',\r\n                                'class': ' label-info'\r\n                            }\r\n                        };\r\n                        return '<span class=\"label label-inline font-weight-bold h-auto' + type[row.orgType].class + '\">' + type[row.orgType].title + '</span>';\r\n                    },\r\n                },*/\r\n                {\r\n                    field: 'regionTime',\r\n                    title: 'Регион и время клиента',\r\n                    template: function(row) {\r\n                        return '<span class=\"d-block font-weight-bolder\">' + row.Region + '</span><span class=\"font-size-sm\">' + row.Time + '</span>';\r\n                    },\r\n                },\r\n                {\r\n                    field: 'Operator',\r\n                    title: 'Оператор',\r\n                },\r\n                {\r\n                    field: 'Comment',\r\n                    title: 'Комментарий',\r\n                    template: function(row) {\r\n                        return '<span class=\"font-size-sm\">' + row.Comment + '</span>';\r\n                    },\r\n                },\r\n                {\r\n                    field: 'Actions',\r\n                    title: '',\r\n                    sortable: false,\r\n                    width: 32,\r\n                    overflow: 'visible',\r\n                    autoHide: false,\r\n                    template: function () {\r\n                        return '\\\r\n                            <div class=\"dropdown dropdown-inline\">\\\r\n                                <a href=\"javascript:;\" class=\"btn btn-sm btn-clean btn-icon\" data-toggle=\"dropdown\">\\\r\n                                    <span class=\"svg-icon svg-icon-md\">\\\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\">\\\r\n                                            <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\\r\n                                                <rect x=\"0\" y=\"0\" width=\"24\" height=\"24\"/>\\\r\n                                                <path d=\"M5,8.6862915 L5,5 L8.6862915,5 L11.5857864,2.10050506 L14.4852814,5 L19,5 L19,9.51471863 L21.4852814,12 L19,14.4852814 L19,19 L14.4852814,19 L11.5857864,21.8994949 L8.6862915,19 L5,19 L5,15.3137085 L1.6862915,12 L5,8.6862915 Z M12,15 C13.6568542,15 15,13.6568542 15,12 C15,10.3431458 13.6568542,9 12,9 C10.3431458,9 9,10.3431458 9,12 C9,13.6568542 10.3431458,15 12,15 Z\" fill=\"#000000\"/>\\\r\n                                            </g>\\\r\n                                        </svg>\\\r\n                                    </span>\\\r\n                                </a>\\\r\n                                <div class=\"dropdown-menu dropdown-menu-sm dropdown-menu-right\">\\\r\n                                    <ul class=\"navi flex-column navi-hover py-2\">\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#openModal\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-window-maximize text-primary\"></i></span>\\\r\n                                                <span class=\"navi-text\">Открыть</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-vcard text-success\"></i></span>\\\r\n                                                <span class=\"navi-text\">Карточка компании</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-edit text-warning\"></i></span>\\\r\n                                                <span class=\"navi-text\">Создать заявку</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#comment\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-comment-o text-info\"></i></span>\\\r\n                                                <span class=\"navi-text\">Комментарий</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\" data-toggle=\"modal\" data-target=\"#changeUnderwriter\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-exchange text-info\"></i></span>\\\r\n                                                <span class=\"navi-text\">Сменить оператора</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                    </ul>\\\r\n                                </div>\\\r\n                            </div>\\\r\n                        ';\r\n                    },\r\n                }\r\n            ],\r\n        });\r\n\r\n        $('#kt_clientsTable_search_type').on('change', function() {\r\n            if ($(this).val().trim().length > 0) {\r\n                datatable.search($(this).val().toLowerCase(), 'orgType');\r\n            } else {\r\n                datatable.search('', 'orgType');\r\n            }\r\n        });\r\n        $('#regionClient').on('change', function() {\r\n            if ($(this).val().trim().length > 0) {\r\n                datatable.search($(this).val().toLowerCase(), 'Region');\r\n            } else {\r\n                datatable.search('', 'Region');\r\n            }\r\n        });\r\n        $('#kt_clientsTable_search_query').on('keyup', function (){\r\n            if ($(this).val().trim().length > 0) {\r\n                datatable.search([$(this).val(), $(this).val()], ['Inn', 'Org']);\r\n            } else {\r\n                datatable.search('', ['Inn', 'Org']);\r\n            }\r\n        });\r\n        $('#clientsOperators').on('changed.bs.select', function() {\r\n            datatable.search($(this).val(), 'Operator');\r\n        });\r\n        $('#kt_clientsTable_search_type').selectpicker();\r\n        $('#kt_reset_v2').on('click', function (){\r\n            $('#kt_clientsTable_search_type').selectpicker('val', null);\r\n            $('#regionClient').val('');\r\n            $('#kt_clientsTable_search_query').val('');\r\n            $('#clientsOperators').selectpicker('val', '');\r\n            datatable.search('', ['Inn', 'Operator', 'Org', 'orgType', 'Region', 'generalSearch']);\r\n        });\r\n    };\r\n    \r\n    var requestsTable = function() {\r\n        var requestsTableJSONArray = JSON.parse('[' +\r\n            '{' +\r\n                '\"ID\": \"001\",' +\r\n                '\"Client\": \"Шилов Адам Викторович\",' +\r\n                '\"Inn\": \"123456789012\",' +\r\n                '\"Requests\": [5, 2, 3],' +\r\n                '\"Status\": 1,' +\r\n                '\"BGsum\": 1200321.20,' +\r\n                '\"BGterm\": \"По 16.05.2022 г, 410 дн.\",' +\r\n                '\"BGtype\": \"На участие\",' +\r\n                '\"purchaseNum\": \"123456789012345678901\",' +\r\n                '\"CreateDate\": \"2021-01-01T12:01:00\",' +\r\n                '\"ChangeDate\": \"2021-01-22T12:11:00\",' +\r\n                '\"Manager\": \"Белозёрова Венера Викторовна\",' +\r\n                '\"Comment\": \"Как принято считать, базовые сценарии поведения пользователей и по сей день остаются уделом либералов, которые жаждут быть разоблачены\",' +\r\n                '\"Actions\": null' +\r\n            '},\\n' +\r\n\t        '{' +\r\n                '\"ID\": \"002\",' +\r\n                '\"Client\": \"Соболев Тимур Ефимович\",' +\r\n                '\"Inn\": \"987654321012\",' +\r\n                '\"Requests\": [5, 2, 3],' +\r\n                '\"Status\": 2,' +\r\n                '\"BGsum\": 479000.20,' +\r\n                '\"BGterm\": \"По 16.05.2022 г, 410 дн.\",' +\r\n                '\"BGtype\": \"На исполнение\",' +\r\n                '\"purchaseNum\": \"123456789012345678901\",' +\r\n                '\"CreateDate\": \"2021-06-23T12:02:00\",' +\r\n                '\"ChangeDate\": \"2021-07-22T12:12:00\",' +\r\n                '\"Manager\": \"Ковалёва Илона Константиновна\",' +\r\n                '\"Comment\": \"А ещё диаграммы связей, которые представляют собой яркий пример континентально-европейского типа политической культуры, будут указаны как претенденты на роль ключевых факторов.\",' +\r\n                '\"Actions\": null' +\r\n            '},\\n' +\r\n            '{' +\r\n                '\"ID\": \"003\",' +\r\n                '\"Client\": \"Овчинников Дмитрий Миронович\",' +\r\n                '\"Inn\": \"13456972563132\",' +\r\n                '\"Requests\": [5, 2, 3],' +\r\n                '\"Status\": 3,' +\r\n                '\"BGsum\": 7666666.20,' +\r\n                '\"BGterm\": \"По 16.05.2022 г, 410 дн.\",' +\r\n                '\"BGtype\": \"На возврат аванса\",' +\r\n                '\"purchaseNum\": \"123456789012345678901\",' +\r\n                '\"CreateDate\": \"2021-02-05T12:03:00\",' +\r\n                '\"ChangeDate\": \"2021-01-22T12:12:03\",' +\r\n                '\"Manager\": \"Романова Цветана Платоновна\",' +\r\n                '\"Comment\": \"В целом, конечно, укрепление и развитие внутренней структуры предоставляет широкие возможности для своевременного выполнения сверхзадачи.\",' +\r\n                '\"Actions\": null' +\r\n            '},\\n' +\r\n            '{' +\r\n                '\"ID\": \"004\",' +\r\n                '\"Client\": \"Сергеев Аввакум Адольфович\",' +\r\n                '\"Inn\": \"98798798798797\",' +\r\n                '\"Requests\": [5, 2, 3],' +\r\n                '\"Status\": 4,' +\r\n                '\"BGsum\": 1200321.20,' +\r\n                '\"BGterm\": \"По 16.05.2022 г, 410 дн.\",' +\r\n                '\"BGtype\": \"На гарантийные обязательства\",' +\r\n                '\"purchaseNum\": \"123456789012345678901\",' +\r\n                '\"CreateDate\": \"2021-02-18T12:04:00\",' +\r\n                '\"ChangeDate\": \"2021-01-22T12:12:13\",' +\r\n                '\"Manager\": \"Ковалёва Илона Константиновна\",' +\r\n                '\"Comment\": \"Также как начало повседневной работы по формированию позиции создаёт предпосылки для новых предложений.\",' +\r\n                '\"Actions\": null' +\r\n            '},\\n' +\r\n            '{' +\r\n                '\"ID\": \"005\",' +\r\n                '\"Client\": \"Нестеров Иосиф Серапионович\",' +\r\n                '\"Inn\": \"9518476233\",' +\r\n                '\"Requests\": [5, 2, 3],' +\r\n                '\"Status\": 5,' +\r\n                '\"BGsum\": 100321.20,' +\r\n                '\"BGterm\": \"По 16.05.2022 г, 410 дн.\",' +\r\n                '\"BGtype\": \"Коммерческая БГ\",' +\r\n                '\"purchaseNum\": \"123456789012345678901\",' +\r\n                '\"CreateDate\": \"2021-02-24T12:05:00\",' +\r\n                '\"ChangeDate\": \"2021-01-22T12:12:23\",' +\r\n                '\"Manager\": \"Романова Цветана Платоновна\",' +\r\n                '\"Comment\": \"С учётом сложившейся международной обстановки, глубокий уровень погружения представляет собой интересный эксперимент проверки соответствующих условий активизации.\",' +\r\n                '\"Actions\": null' +\r\n            '},\\n' +\r\n            '{' +\r\n                '\"ID\": \"006\",' +\r\n                '\"Client\": \"Кошелев Савелий Константинович\",' +\r\n                '\"Inn\": \"8628476233\",' +\r\n                '\"Requests\": [5, 2, 3],' +\r\n                '\"Status\": 6,' +\r\n                '\"BGsum\": 200321.20,' +\r\n                '\"BGterm\": \"По 16.05.2022 г, 410 дн.\",' +\r\n                '\"BGtype\": \"Коммерческая БГ\",' +\r\n                '\"purchaseNum\": \"123456789012345678901\",' +\r\n                '\"CreateDate\": \"2021-02-24T12:06:00\",' +\r\n                '\"ChangeDate\": \"2021-01-22T12:12:33\",' +\r\n                '\"Manager\": \"Белозёрова Венера Викторовна\",' +\r\n                '\"Comment\": \"С учётом сложившейся международной обстановки, глубокий уровень погружения представляет собой интересный эксперимент проверки соответствующих условий активизации.\",' +\r\n                '\"Actions\": null' +\r\n            '},\\n' +\r\n            '{' +\r\n                '\"ID\": \"007\",' +\r\n                '\"Client\": \"Попов Петр Созонович\",' +\r\n                '\"Inn\": \"1678476233\",' +\r\n                '\"Requests\": [5, 2, 3],' +\r\n                '\"Status\": 7,' +\r\n                '\"BGsum\": 3200321.20,' +\r\n                '\"BGterm\": \"По 16.05.2022 г, 410 дн.\",' +\r\n                '\"BGtype\": \"На участие\",' +\r\n                '\"purchaseNum\": \"123456789012345678901\",' +\r\n                '\"CreateDate\": \"2021-02-24T12:07:00\",' +\r\n                '\"ChangeDate\": \"2021-01-22T12:12:43\",' +\r\n                '\"Manager\": \"Романова Цветана Платоновна\",' +\r\n                '\"Comment\": \"С учётом сложившейся международной обстановки, глубокий уровень погружения представляет собой интересный эксперимент проверки соответствующих условий активизации.\",' +\r\n                '\"Actions\": null' +\r\n            '},\\n' +\r\n            '{' +\r\n                '\"ID\": \"008\",' +\r\n                '\"Client\": \"Кузьмин Аркадий Вениаминович\",' +\r\n                '\"Inn\": \"2228476233\",' +\r\n                '\"Requests\": [5, 2, 3],' +\r\n                '\"Status\": 8,' +\r\n                '\"BGsum\": 855555.20,' +\r\n                '\"BGterm\": \"По 16.05.2022 г, 410 дн.\",' +\r\n                '\"BGtype\": \"На гарантийные обязательства\",' +\r\n                '\"purchaseNum\": \"123456789012345678901\",' +\r\n                '\"CreateDate\": \"2021-02-24T12:08:00\",' +\r\n                '\"ChangeDate\": \"2021-01-22T12:12:53\",' +\r\n                '\"Manager\": \"Белозёрова Венера Викторовна\",' +\r\n                '\"Comment\": \"С учётом сложившейся международной обстановки, глубокий уровень погружения представляет собой интересный эксперимент проверки соответствующих условий активизации.\",' +\r\n                '\"Actions\": null' +\r\n            '},\\n' +\r\n            '{' +\r\n                '\"ID\": \"009\",' +\r\n                '\"Client\": \"Иванков Андрей Петрович\",' +\r\n                '\"Inn\": \"3258476233\",' +\r\n                '\"Requests\": [5, 2, 3],' +\r\n                '\"Status\": 9,' +\r\n                '\"BGsum\": 66767,' +\r\n                '\"BGterm\": \"По 16.05.2022 г, 410 дн.\",' +\r\n                '\"BGtype\": \"На исполнение\",' +\r\n                '\"purchaseNum\": \"123456789012345678901\",' +\r\n                '\"CreateDate\": \"2021-04-24T12:09:00\",' +\r\n                '\"ChangeDate\": \"2021-01-22T12:13:03\",' +\r\n                '\"Manager\": \"Ковалёва Илона Константиновна\",' +\r\n                '\"Comment\": \"С учётом сложившейся международной обстановки, глубокий уровень погружения представляет собой интересный эксперимент проверки соответствующих условий активизации.\",' +\r\n                '\"Actions\": null' +\r\n            '},\\n' +\r\n            '{' +\r\n                '\"ID\": \"010\",' +\r\n                '\"Client\": \"Михайлов Михаил Михайлович\",' +\r\n                '\"Inn\": \"7418476233\",' +\r\n                '\"Requests\": [5, 2, 3],' +\r\n                '\"Status\": \"0\",' +\r\n                '\"BGsum\": 67654.20,' +\r\n                '\"BGterm\": \"По 16.05.2022 г, 410 дн.\",' +\r\n                '\"BGtype\": \"Коммерческая БГ\",' +\r\n                '\"purchaseNum\": \"123456789012345678901\",' +\r\n                '\"CreateDate\": \"2021-04-24T12:10:00\",' +\r\n                '\"ChangeDate\": \"2021-01-22T12:14:03\",' +\r\n                '\"Manager\": \"Романова Цветана Платоновна\",' +\r\n                '\"Comment\": \"С учётом сложившейся международной обстановки, глубокий уровень погружения представляет собой интересный эксперимент проверки соответствующих условий активизации.\",' +\r\n                '\"Actions\": null' +\r\n            '}]');\r\n        \r\n        var datatable = $('#kt_requestsTable').KTDatatable({\r\n            data: {\r\n                type: 'local',\r\n                source: requestsTableJSONArray,\r\n                pageSize: 10,\r\n            },\r\n            layout: {\r\n                scroll: false,\r\n                footer: false\r\n            },\r\n            sortable: true,\r\n            pagination: true,\r\n            search: {\r\n                input: $('#kt_requestsTable_search_client'),\r\n                key: 'generalSearch'\r\n            },\r\n            columns: [\r\n                {\r\n                    field: 'ID',\r\n                    title: '№ заявки',\r\n                    template: function (row) {\r\n                        var dateTime = new Date(row.CreateDate);\r\n                        var day = dateTime.getDate() < 10 ? '0' + dateTime.getDate() : dateTime.getDate();\r\n                        var month = dateTime.getMonth() + 1 < 10 ? '0' + (dateTime.getMonth() + 1) : (dateTime.getMonth() + 1);\r\n                        var date = day + '.' + month  +  '.' + dateTime.getFullYear();\r\n                        var hour = dateTime.getHours() < 10 ? '0' + dateTime.getHours() : dateTime.getHours();\r\n                        var minute = dateTime.getMinutes() < 10 ? '0' + dateTime.getMinutes() : dateTime.getMinutes();\r\n                        var time =  hour + ':' + minute;\r\n                        return '<a class=\"text-dark-75 font-weight-bolder text-hover-primary\" href=\"#\">' + row.ID + '</a>'\r\n                          + '<div class=\"font-size-sm text-muted\">' +date + '<br>' + time + '</div>';\r\n                    }\r\n                },\r\n                {\r\n                    field: 'Client',\r\n                    title: 'Клиент, ИНН',\r\n                    width: 144,\r\n                    template: function (row) {\r\n                        return '<a class=\"text-dark-75 font-weight-bolder text-hover-primary\" href=\"#\">' + row.Client + '</a>' + '<div class=\"font-size-sm text-muted\">ИНН ' + row.Inn + '</div>';\r\n                    }\r\n                },\r\n                {\r\n                    field: 'purchaseNum',\r\n                    title: 'Номер закупки,<br>Тип БГ',\r\n                    width: 160,\r\n                    template: function (row) {\r\n                        return '<span class=\"font-size-sm text-nowrap\">' + row.purchaseNum + '</span>' + '<div class=\"font-size-sm text-muted\">' + row.BGtype + '</div>';\r\n                    }\r\n                },\r\n                {\r\n                    field: 'BGsum',\r\n                    title: 'Сумма БГ, срок БГ',\r\n                    width: 120,\r\n                    template: function (row) {\r\n                        return '<span class=\"font-size-sm text-nowrap\">' + new Intl.NumberFormat('ru-RU', {\r\n                            style: 'currency',\r\n                            currency: 'RUB',\r\n                        }).format(row.BGsum) + '</span>' + '<div class=\"font-size-sm text-muted\">' + row.BGterm + '</div>';\r\n                    }\r\n                },\r\n                {\r\n                    field: 'Status',\r\n                    title: 'Статус',\r\n                    width: 100,\r\n                    template: function (row) {\r\n                        var status = {\r\n                            1: {\r\n                                'title': 'Черновики',\r\n                                'class': ' label-light-dark'\r\n                            },\r\n                            2: {\r\n                                'title': 'Проверка порталом',\r\n                                'class': ' label-light-warning'\r\n                            },\r\n                            3: {\r\n                                'title': 'Доработать',\r\n                                'class': ' label-light-danger'\r\n                            },\r\n                            4: {\r\n                                'title': 'В банках',\r\n                                'class': ' label-light-info'\r\n                            },\r\n                            5: {\r\n                                'title': 'Есть предложение',\r\n                                'class': ' label-light-success'\r\n                            },\r\n                            6: {\r\n                                'title': 'Согласование макета',\r\n                                'class': ' label-light-warning'\r\n                            },\r\n                            7: {\r\n                                'title': 'Предложение принято',\r\n                                'class': ' label-light-success'\r\n                            },\r\n                            8: {\r\n                                'title': 'Оплачено',\r\n                                'class': ' label-light-info'\r\n                            },\r\n                            9: {\r\n                                'title': 'Выпущено',\r\n                                'class': ' label-light-success'\r\n                            },\r\n                            0: {\r\n                                'title': 'Перевыпуск',\r\n                                'class': ' label-light-danger'\r\n                            }\r\n                        };\r\n                        return '<span class=\"label label-inline font-weight-bold h-auto' + status[row.Status].class + '\">' + status[row.Status].title + '</span>' + '<div class=\"cursor-pointer mt-4\" data-toggle=\"modal\" data-target=\"#requestInfo\"><span class=\"label label-sm label-rounded label-info\" title=\"Подано заявлений\">' + row.Requests[0] + '</span> | <span class=\"label label-sm label-rounded label-success\" title=\"Одобрено заявлений\">' + row.Requests[1] + '</span> / <span class=\"label label-sm label-rounded label-danger\" title=\"Отказано\">' + row.Requests[2] + '</span></div>';\r\n                    },\r\n                },\r\n                {\r\n                    field: 'ChangeDate',\r\n                    title: 'Последнее изменение',\r\n                    width: 120,\r\n                    template: function (row) {\r\n                        var dateTimeCD = new Date(row.CreateDate);\r\n                        var dayCD = dateTimeCD.getDate() < 10 ? '0' + dateTimeCD.getDate() : dateTimeCD.getDate();\r\n                        var monthCD = dateTimeCD.getMonth() + 1 < 10 ? '0' + (dateTimeCD.getMonth() + 1) : (dateTimeCD.getMonth() + 1);\r\n                        var dateCD = dayCD + '.' + monthCD  +  '.' + dateTimeCD.getFullYear();\r\n                        var hourCD = dateTimeCD.getHours() < 10 ? '0' + dateTimeCD.getHours() : dateTimeCD.getHours();\r\n                        var minuteCD = dateTimeCD.getMinutes() < 10 ? '0' + dateTimeCD.getMinutes() : dateTimeCD.getMinutes();\r\n                        var timeCD =  hourCD + ':' + minuteCD;\r\n                        return '<div class=\"font-size-sm\">' + dateCD + '<br>' + timeCD + '</div>';\r\n                    }\r\n                },\r\n                {\r\n                    field: 'Chat',\r\n                    title: 'Чат с банком',\r\n                    width: 80,\r\n                    template: function () {\r\n                        return '<a class=\"btn btn-icon btn-light-success btn-circle btn-sm mr-2\" href=\"16.html\" title=\"Чат с банком\"><i class=\"flaticon2-chat-1\"></i></a>';\r\n                    }\r\n                },\r\n                {\r\n                    field: 'Manager',\r\n                    title: 'Оператор',\r\n                    width: 120\r\n                },\r\n                {\r\n                    field: 'Actions',\r\n                    title: '',\r\n                    sortable: false,\r\n                    width: 32,\r\n                    overflow: 'visible',\r\n                    autoHide: false,\r\n                    template: function () {\r\n                        return '\\\r\n                            <div class=\"dropdown dropdown-inline\">\\\r\n                                <a href=\"javascript:;\" class=\"btn btn-sm btn-clean btn-icon\" data-toggle=\"dropdown\">\\\r\n                                    <span class=\"svg-icon svg-icon-md\">\\\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\">\\\r\n                                            <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\\r\n                                                <rect x=\"0\" y=\"0\" width=\"24\" height=\"24\"/>\\\r\n                                                <path d=\"M5,8.6862915 L5,5 L8.6862915,5 L11.5857864,2.10050506 L14.4852814,5 L19,5 L19,9.51471863 L21.4852814,12 L19,14.4852814 L19,19 L14.4852814,19 L11.5857864,21.8994949 L8.6862915,19 L5,19 L5,15.3137085 L1.6862915,12 L5,8.6862915 Z M12,15 C13.6568542,15 15,13.6568542 15,12 C15,10.3431458 13.6568542,9 12,9 C10.3431458,9 9,10.3431458 9,12 C9,13.6568542 10.3431458,15 12,15 Z\" fill=\"#000000\"/>\\\r\n                                            </g>\\\r\n                                        </svg>\\\r\n                                    </span>\\\r\n                                </a>\\\r\n                                <div class=\"dropdown-menu dropdown-menu-sm dropdown-menu-right\">\\\r\n                                    <ul class=\"navi flex-column navi-hover py-2\">\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-door-open text-primary\"></i></span>\\\r\n                                                <span class=\"navi-text\">Открыть</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"/17.html#price-management\" class=\"navi-link\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-gear text-success\"></i></span>\\\r\n                                                <span class=\"navi-text\">Управлять ценой</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                        <li class=\"navi-item\">\\\r\n                                            <a href=\"#\" class=\"navi-link\">\\\r\n                                                <span class=\"navi-icon\"><i class=\"la la-user-circle-o text-danger\"></i></span>\\\r\n                                                <span class=\"navi-text\">В аккаунт клиента</span>\\\r\n                                            </a>\\\r\n                                        </li>\\\r\n                                    </ul>\\\r\n                                </div>\\\r\n                            </div>\\\r\n                        ';\r\n                    },\r\n                }\r\n            ],\r\n        });\r\n\r\n        $('#requestsEmployees').on('changed.bs.select', function() {\r\n            datatable.search($(this).val(), 'Manager');\r\n        });\r\n        $('button[data-radio=\"status\"]').on('click', function () {\r\n            var val = $(this).data('value');\r\n            if (typeof val === 'number') {\r\n                datatable.search(val + '', 'Status');\r\n            } else {\r\n                datatable.search('', 'Status');\r\n            }\r\n        });\r\n        /*$('#kt_reviewsTable_search_status').on('change', function() {\r\n            datatable.search($(this).val().toLowerCase(), 'Status');\r\n        });*/\r\n        $('#kt_reviewsTable_search_client').on('keyup', function (){\r\n            if ($(this).val().trim().length > 0) {\r\n                datatable.search([$(this).val(), $(this).val()], ['Inn', 'Client']);\r\n            } else {\r\n                datatable.search('', ['Inn', 'Client']);\r\n            }\r\n        });\r\n        $('#kt_reviewsTable_search_number').on('keyup', function (){\r\n            datatable.search($(this).val(), 'ID');\r\n        });\r\n\r\n        $('#kt_reviewsTable_search_purchase_num').on('keyup', function (){\r\n            datatable.search($(this).val(), 'purchaseNum');\r\n        });\r\n        /*$('#kt_reviewsTable_search_status').selectpicker();*/\r\n        $('#kt_reset').on('click', function (){\r\n            //$('#kt_reviewsTable_search_status').selectpicker('val', null);\r\n            $('#kt_reviewsTable_search_client').val('');\r\n            $('#kt_reviewsTable_search_number').val('');\r\n            $('#kt_reviewsTable_search_purchase_num').val('');\r\n            $('#requestsEmployees').selectpicker('deselectAll');\r\n            $('button[data-radio=\"status\"]:first').click();\r\n            $from.val(null);\r\n            $to.val(null);\r\n            $start.val(null);\r\n            $end.val(null);\r\n            datatable.originalDataSet = requestsTableJSONArray;\r\n            datatable.search('', [\r\n              'Inn', 'Client', 'Manager', 'Status', 'ID', 'generalSearch', 'purchaseNum'\r\n            ]);\r\n        });\r\n\r\n        // фильтрация с подменой данных\r\n        function filter() {\r\n            var fromVal = $from.cleanVal() ? $from.cleanVal() / 100 : null;\r\n            var toVal = $to.cleanVal() ? $to.cleanVal() / 100 : null;\r\n            var startVal = $start.val() ? new Date($start.val()): null;\r\n            var endVal = $end.val() ? new Date($end.val()): null;\r\n\r\n            // нет подходящего метода\r\n            var filterData = requestsTableJSONArray.filter(function (object) {\r\n                var date = new Date(object.CreateDate);\r\n                return ((!startVal || startVal <= date) &&\r\n                  (!endVal || endVal >= date))\r\n                  &&\r\n                  ((!fromVal || fromVal <= object.BGsum) &&\r\n                    (!toVal || toVal >= object.BGsum));\r\n            });\r\n            if (datatable) { // подмена ориганльного набора\r\n                datatable.originalDataSet = filterData;\r\n                datatable.load();\r\n            }\r\n        }\r\n        var $from = $('input[name=\"from\"]');\r\n        var $to = $('input[name=\"to\"]');\r\n        $from.on('keyup', filter);\r\n        $to.on('keyup', filter);\r\n\r\n        var $start = $('input[name=\"start\"]');\r\n        var $end = $('input[name=\"end\"]');\r\n        $start.on('change', filter);\r\n        $end.on('change', filter);\r\n\r\n        if (datatable) {\r\n            datatable.sort('ID', 'desc');\r\n        }\r\n    };\r\n    \r\n    var customersTable = function() {\r\n        var customersTableJSONArray = JSON.parse('[' +\r\n            '{\"innkpp\": \"1237846180 / 921701001\", \"ben\": \"ГБУ «Рога и копыта»\", \"nmck\": \"85 107 846,30\", \"sum\": \"25532353,89\", \"DateStart\": \"2021-03-29\", \"DateEnd\": \"2021-03-29\"},\\n' +\r\n            '{\"innkpp\": \"1137846180 / 821701001\", \"ben\": \"ООО «Рога и копыта»\", \"nmck\": \"20 151 176,37\", \"sum\": \"6045352,91\", \"DateStart\": \"2021-03-29\", \"DateEnd\": \"2021-03-29\"},\\n' +\r\n            '{\"innkpp\": \"1337846180 / 721701001\", \"ben\": \"ККК «Рога и копыта»\", \"nmck\": \"34 566 958,77\", \"sum\": \"10370087,63\", \"DateStart\": \"2021-03-29\", \"DateEnd\": \"2021-03-29\"},\\n' +\r\n            '{\"innkpp\": \"1537846180 / 621701001\", \"ben\": \"ППП «Рога и копыта»\", \"nmck\": \"46 241 161,49\", \"sum\": \"13872348,45\", \"DateStart\": \"2021-03-29\", \"DateEnd\": \"2021-03-29\"},\\n' +\r\n            '{\"innkpp\": \"1637846180 / 521701001\", \"ben\": \"ОАО «Рога и копыта»\", \"nmck\": \"39 041 595,35\", \"sum\": \"11712478,61\", \"DateStart\": \"2021-03-29\", \"DateEnd\": \"2021-03-29\"}]');\r\n        \r\n        var datatable = $('#customersTable').KTDatatable({\r\n            data: {\r\n                type: 'local',\r\n                source: customersTableJSONArray,\r\n                pageSize: 10,\r\n            },\r\n            layout: {\r\n                scroll: false,\r\n                footer: false\r\n            },\r\n            sortable: true,\r\n            pagination: true,\r\n            columns: [\r\n                {\r\n                    field: 'RecordID',\r\n                    title: '#',\r\n                    sortable: false,\r\n                    width: 20,\r\n                    type: 'number',\r\n                    selector: {\r\n                        class: ''\r\n                    },\r\n                    textAlign: 'center',\r\n                },\r\n                {\r\n                    field: 'innkpp',\r\n                    title: 'ИНН / КПП бенефициара',\r\n                },\r\n                {\r\n                    field: 'ben',\r\n                    title: 'Наименование бенефициара',\r\n                },\r\n                {\r\n                    field: 'nmck',\r\n                    title: 'НМЦК, ₽'\r\n                },\r\n                {\r\n                    field: 'sum',\r\n                    title: 'Сумма БГ, ₽',\r\n                    width: 144,\r\n                    template: function (row) {\r\n                        return '<input class=\"form-control input-sum\" type=\"text\" value='+ row.sum + '>';\r\n                    }\r\n                },\r\n                {\r\n                    field: 'DateStart',\r\n                    title: 'Начало действия БГ',\r\n                    width: 160,\r\n                    template: function (row) {\r\n                        return '<input type=\"date\" class=\"form-control\" placeholder=\"дд/мм/гггг\" value='+ row.DateStart + ' disabled>';\r\n                    }\r\n                },\r\n                {\r\n                    field: 'DateEnd',\r\n                    title: 'Окончание действия БГ',\r\n                    width: 160,\r\n                    template: function (row) {\r\n                        return '<input type=\"date\" class=\"form-control\" placeholder=\"дд/мм/гггг\" value='+ row.DateEnd + '>';\r\n                    }\r\n                }\r\n            ],\r\n        });\r\n        if (datatable) {\r\n            datatable.on('datatable-on-layout-updated', function () {\r\n                KTMask.init();\r\n            })\r\n        }\r\n    };\r\n    \r\n    var customersSelectTable = function() {\r\n        var customersTableJSONArray = JSON.parse('[' +\r\n            '{\"innkpp\": \"1237846180 / 921701001\", \"ben\": \"ГБУ «Рога и копыта»\", \"nmck\": \"85 107 846,30\", \"sum\": \"25532353,89\", \"DateStart\": \"2021-03-29\", \"DateEnd\": \"2021-03-29\"},\\n' +\r\n            '{\"innkpp\": \"1137846180 / 821701001\", \"ben\": \"ООО «Рога и копыта»\", \"nmck\": \"20 151 176,37\", \"sum\": \"6045352,91\", \"DateStart\": \"2021-03-29\", \"DateEnd\": \"2021-03-29\"},\\n' +\r\n            '{\"innkpp\": \"1337846180 / 721701001\", \"ben\": \"ККК «Рога и копыта»\", \"nmck\": \"34 566 958,77\", \"sum\": \"10370087,63\", \"DateStart\": \"2021-03-29\", \"DateEnd\": \"2021-03-29\"},\\n' +\r\n            '{\"innkpp\": \"1537846180 / 621701001\", \"ben\": \"ППП «Рога и копыта»\", \"nmck\": \"46 241 161,49\", \"sum\": \"13872348,45\", \"DateStart\": \"2021-03-29\", \"DateEnd\": \"2021-03-29\"},\\n' +\r\n            '{\"innkpp\": \"1637846180 / 521701001\", \"ben\": \"ОАО «Рога и копыта»\", \"nmck\": \"39 041 595,35\", \"sum\": \"11712478,61\", \"DateStart\": \"2021-03-29\", \"DateEnd\": \"2021-03-29\"}]');\r\n        \r\n        var datatable = $('#customersSelectTable').KTDatatable({\r\n            data: {\r\n                type: 'local',\r\n                source: customersTableJSONArray,\r\n                pageSize: 5,\r\n            },\r\n            layout: {\r\n                scroll: false,\r\n                footer: false\r\n            },\r\n            sortable: true,\r\n            pagination: true,\r\n            columns: [\r\n                {\r\n                    field: 'innkpp',\r\n                    title: 'ИНН / КПП бенефициара',\r\n                },\r\n                {\r\n                    field: 'ben',\r\n                    title: 'Наименование бенефициара',\r\n                },\r\n                {\r\n                    field: 'nmck',\r\n                    title: 'НМЦК, ₽'\r\n                },\r\n                {\r\n                    field: 'sum',\r\n                    title: 'Сумма БГ, ₽',\r\n                    width: 144,\r\n                    template: function (row) {\r\n                        return '<input class=\"form-control input-sum\" type=\"text\" value='+ row.sum + '>';\r\n                    }\r\n                },\r\n                {\r\n                    field: 'DateStart',\r\n                    title: 'Начало действия БГ',\r\n                    width: 160,\r\n                    template: function (row) {\r\n                        return '<input type=\"date\" class=\"form-control\" placeholder=\"дд/мм/гггг\" value='+ row.DateStart + ' disabled>';\r\n                    }\r\n                },\r\n                {\r\n                    field: 'DateEnd',\r\n                    title: 'Окончание действия БГ',\r\n                    width: 160,\r\n                    template: function (row) {\r\n                        return '<input type=\"date\" class=\"form-control\" placeholder=\"дд/мм/гггг\" value='+ row.DateEnd + '>';\r\n                    }\r\n                }\r\n            ],\r\n            rows: {\r\n                afterTemplate: function (row, data, index) {\r\n                    row.hover(\r\n                      function() {$(this).addClass('bg-gray-100').css({'cursor': 'pointer'});},\r\n                      function() {$(this).removeClass('bg-gray-100').css({'cursor': 'none'});}\r\n                    );\r\n\r\n                    row.on('click', function () {\r\n\t\t\t\t\t\t\t\t\t\t    var $table = $('[data-child=\"test-table\"]'),\r\n                            $tbody = $table.find('tbody');\r\n                        if (!window.saveDataTable) {\r\n                            window.saveDataTable = $tbody.html();\r\n                        }\r\n\t\t\t\t\t\t\t\t\t\t    if (index === 0) {\r\n\t\t\t\t\t\t\t\t\t\t        $tbody.html(window.saveDataTable);\r\n                        } else {\r\n\t\t\t\t\t\t\t\t\t\t        $tbody.html('<tr><td class=\"align-middle\" colspan=\"8\">смена таблицы #' + (index + 1) + '..</td></tr>');\r\n                        }\r\n\t\t\t\t\t\t\t\t\t\t});\r\n                }\r\n            }\r\n        });\r\n    \r\n        $('#tab-panel').on('hide.bs.tab', function () {\r\n            setTimeout(function () {\r\n                datatable.redraw();\r\n            }, 250);\r\n        });\r\n        \r\n        if (datatable) {\r\n            datatable.on('datatable-on-layout-updated', function () {\r\n                KTMask.init();\r\n            })\r\n        }\r\n    };\r\n\r\n    return {\r\n        init: function() {\r\n            userTable();\r\n            subTable();\r\n            clientsTable();\r\n            requestsTable();\r\n            customersTable();\r\n            customersSelectTable();\r\n        },\r\n    };\r\n}();\r\n\r\njQuery(document).ready(function() {\r\n    KTDatatableDataLocal.init();\r\n});\r\n"],"file":"data-local.js"}